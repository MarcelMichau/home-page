# GitHub Copilot Instructions

## Project Overview

This is a personal portfolio website built with vanilla HTML and Tailwind CSS v4, deployed to Cloudflare Pages. The project intentionally avoids JavaScript frameworks to maintain simplicity and performance.

## Architecture & Structure

- **Entry point**: [src/index.html](../src/index.html) - Single-page site with full-screen header and content sections
- **Styling**: [src/main.css](../src/main.css) - Tailwind v4 with custom `@theme` for animations and keyframes
- **Build output**: `src/dist/main.css` - Generated by Tailwind CLI during build
- **Security headers**: [src/_headers](../src/_headers) - Cloudflare Pages headers with strict CSP policies
- **Assets**: `src/images/` for images, various favicon files in `src/` root

## Development Workflow

### Commands
- **Development**: `pnpm start` - Starts Wrangler dev server on http://localhost:8788
- **Build CSS**: `pnpm run build` - Minifies CSS for production
- **Watch CSS**: `pnpm run build:watch` - Watches `src/main.css` and rebuilds with Tailwind CLI
- **Testing**: `pnpm test` - Runs Playwright tests (automatically starts dev server)
- **Deploy**: Automatic via GitHub Actions on push to any branch

### Key Patterns
- **No build configuration files**: Tailwind v4 uses `@import 'tailwindcss'` in CSS instead of `tailwind.config.js`
- **Theme customization**: Define custom properties in `@theme` blocks within `src/main.css`
- **Inline SVG usage**: Social icons and decorative elements use inline SVG with Tailwind classes for styling
- **Custom animations**: Typing effect uses custom `@keyframes` defined in `@theme` block

## Tailwind CSS v4 Specifics

- Import with `@import 'tailwindcss'` in CSS file (not `@tailwind` directives)
- Custom design tokens defined in `@theme` blocks with CSS custom properties (`--animate-*`)
- No separate config file needed - configuration lives in CSS
- Use `@theme` for defining custom animations, colors, spacing, etc.

## Deployment Pipeline

The [.github/workflows/build-deploy.yml](../.github/workflows/build-deploy.yml) workflow:
1. Installs pnpm v10 with caching
2. Runs `pnpm run build` to generate minified CSS
3. Deploys entire `src/` directory to Cloudflare Pages using Wrangler

**Important**: The deployment includes all files in `src/` - HTML, generated CSS, images, and `_headers` file.

## Security & Headers

The `src/_headers` file defines strict security policies:
- Restrictive Content-Security-Policy (CSP)
- CORS limited to `https://marcelmichau.dev`
- Cross-origin isolation policies
- No tracking/analytics permissions

When modifying the site, ensure changes comply with the CSP (no inline scripts/styles without 'unsafe-inline').

## Common Tasks

### Adding New Sections
- Add semantic HTML in `src/index.html` within the `<main>` element
- Use Tailwind utility classes for styling (grid, flex, spacing)
- Maintain consistent gray color scheme (gray-800, gray-900)

### Updating Styles
- Modify `src/main.css` for custom CSS or theme additions
- Use Tailwind utilities in HTML - avoid custom CSS when possible
- Run `pnpm start` to see changes in real-time

### Adding Assets
- Place images in `src/images/`
- Update favicon files in `src/` root if changing branding
- Reference assets with relative paths from `index.html`

## Testing Locally

Use the Wrangler dev server for local development and testing:
1. Run `pnpm start` to start the dev server at http://localhost:8788
2. For CSS-only changes, use `pnpm run build:watch` to watch and rebuild Tailwind CSS
3. Tests automatically start the dev server when running `pnpm test`

## Testing with Playwright

The project uses Playwright for end-to-end testing. Tests run against a local Wrangler dev server that starts automatically.

### Commands
- **Run all tests**: `pnpm test` or `npx playwright test` (auto-starts dev server)
- **Run tests in UI mode**: `npx playwright test --ui`
- **Run tests in headed mode**: `npx playwright test --headed`
- **Run specific test file**: `npx playwright test tests/portfolio.spec.ts`
- **Show test report**: `npx playwright show-report`
- **Debug tests**: `npx playwright test --debug`

### Configuration
- **Config file**: `playwright.config.ts` - Contains browser configurations, test settings, baseURL (http://localhost:8788), and webServer configuration
- **Base URL**: Tests use `baseURL` from config and navigate with relative paths (e.g., `page.goto('/')`)
- **Dev Server**: Playwright automatically starts `pnpm start` before tests and shuts it down after
- **Config file**: `playwright.config.ts` - Contains browser configurations, test settings, and reporter options
- **Test results**: Generated in `test-results/` directory
- **HTML reports**: Generated in `playwright-report/` directory

### Writing Tests
- Place test files in the `tests/` directory with `.spec.ts` extension
- Tests should verify visual rendering, interactive elements, and accessibility
- Use Playwright's built-in assertions and selectors
- Consider testing the typing animation, social links, and responsive behavior

### Automated Testing with Playwright MCP

The Playwright MCP server is configured in `.vscode/mcp.json` for browser automation and testing:
- Use Playwright MCP tools to navigate to the local site (e.g., via `file://` or local server)
- Capture accessibility snapshots with `browser_snapshot` to verify structure
- Take screenshots with `browser_take_screenshot` for visual inspection
- Test interactions like clicking social links, scrolling, and responsive behavior
- Validate the typing animation and other CSS effects render correctly

Example workflow:
1. Start local server: `npx wrangler pages dev src` (runs on http://localhost:8788 by default)
2. Use Playwright MCP to navigate and test the site
3. Verify accessibility tree, visual rendering, and interactive elements
